<div class="mailbox row">
  <div class="col-xs-12 col-md-6">
    <div class="box box-solid">
      <div class="box-body box-info">
        <h4>{{months[month]}} {{year}}</h4>
        <i class="fa fa-line-chart fa-lg"></i>
        <hr>
        <div id='myChart1' class="chartStyle"></div>
      </div>
    </div>
  </div>
  <div class="col-xs-12 col-md-6">
    <div class="box box-solid">
      <div class="box-body box-info">
        <h4>Empresas</h4>
        <i class="fa fa-pie-chart fa-lg"></i>
        <hr>
        <div id='myChart2' class="chartStyle"></div>
      </div>
    </div>
  </div>
</div>

<div class="mailbox row" data-ng-init="init()">
    <div class="col-xs-12">
        <div class="box box-solid">
            <div class="box-body">
              <div class="">
                <div class="row">
                  <div class="col-xs-12">
                    <div class="row">
                      <div class="col-xs-12 col-md-3">
                        <div class="input-field btn_searchP">
                          <div class="input-group">
                              <span class="input-group-addon"><i class="glyphicon glyphicon-filter"></i></span>
                              <input id="searchText_input" type="text" ng-model="searchText" class="form-control" placeholder="Filtrar..."/>
                          </div>
                        </div>
                      </div>
                      <div class="col-xs-12 col-md-4">
                        <div class="input-group">
                          <div class="input-group-addon">Año</div>
                              <select name="anio" id="anio" class="form-control" ng-model="year" required>
                                  <option value="" disabled selected hidden>Año</option>
                                  <option ng-repeat="y in years" value="{{y}}">{{y}}</option>
                              </select>
                        </div>
                      </div>
                      <div class="col-xs-12 col-md-4">
                        <div class="input-group">
                          <div class="input-group-addon">Mes</div>
                              <select name="mes" id="mes" class="form-control" ng-model="month" required>
                                  <option value="" disabled selected hidden>Mes</option>
                                  <option ng-repeat="m in months" value="{{$index}}">{{m}}</option>
                              </select>
                        </div>
                      </div>
                      <div class="col-xs-12 col-md-1">
                        <button type="button" class="btn btn-primary btn-block" ng-click="buscarHistory()"><i class="glyphicon glyphicon-search"></i></button>
                      </div>
                    </div>
                    <div class="row info_table">
                      <div class="col-xs-6 text-center">
                        <p>Periodo: <b>{{months[month]}} {{year}}</b></p>
                      </div>
                      <div class="col-xs-6 text-center">
                        <p>Registros: <b>{{registros}}</b></p>
                      </div>
                    </div>
                    <div class=" table-responsive">
                      <table id="table_proyects" class="table table-striped table-hover table-condensed">
                        <thead>
                        <tr>
                            <th class="th_noContent text-center"></th>
                            <th class="th_click" ng-click="sortType = 'fecha'; sortReverse = !sortReverse">Fecha
                              <span ng-show="sortType == 'fecha' && !sortReverse" class="fa fa-caret-down"></span>
                              <span ng-show="sortType == 'fecha' && sortReverse" class="fa fa-caret-up"></span>
                            </th>
                            <th class="th_click" ng-click="sortType = 'usuario.nombre'; sortReverse = !sortReverse">Nombre
                              <span ng-show="sortType == 'usuario.nombre' && !sortReverse" class="fa fa-caret-down"></span>
                              <span ng-show="sortType == 'usuario.nombre' && sortReverse" class="fa fa-caret-up"></span>
                            </th>
                            <th class="th_click" ng-click="sortType = 'usuario.nombre_usuario'; sortReverse = !sortReverse">Usuario
                              <span ng-show="sortType == 'usuario.nombre_usuario' && !sortReverse" class="fa fa-caret-down"></span>
                              <span ng-show="sortType == 'usuario.nombre_usuario' && sortReverse" class="fa fa-caret-up"></span>
                            </th>
                            <th class="th_click" ng-click="sortType = 'usuario.empresa.nombre'; sortReverse = !sortReverse">Empresa
                              <span ng-show="sortType == 'usuario.empresa.nombre' && !sortReverse" class="fa fa-caret-down"></span>
                              <span ng-show="sortType == 'usuario.empresa.nombre' && sortReverse" class="fa fa-caret-up"></span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="his in historial | filter:searchText | orderBy:sortType:sortReverse" ng-class="{even: $even, odd: $odd}">
                              <td class="text-center"><img class="table_sm_img"ng-src="/img/avatar1.png"></td>
                              <td>{{his.fecha | date : "short" }}</td>
                              <td>{{his.usuario.nombre}}</td>
                              <td>{{his.usuario.nombre_usuario}}</td>
                              <td>{{his.usuario.empresa.nombre}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
    </div>
</div>